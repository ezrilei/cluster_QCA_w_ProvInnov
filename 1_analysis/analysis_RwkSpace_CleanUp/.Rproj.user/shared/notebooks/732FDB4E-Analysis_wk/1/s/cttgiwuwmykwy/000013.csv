"0","# 加一列config （e.g. ""Y / X3"")"
"0","wide_yearly_BECON_AdjDis_greater_0_2_config <- wide_yearly_BECON_AdjDis_greater_0_2 %>% "
"0","  mutate(Config = paste0(outcome_var, "" / "", Result_Type))"
"0",""
"0","# 确保排序正确"
"0",""
"0","label_data <- wide_yearly_BECON_AdjDis_greater_0_2_config %>%"
"0","  group_by(Config) %>%"
"0","  filter(YEAR == max(YEAR)) %>%"
"0","  ungroup()"
"0",""
"0","# 绘图"
"0","library(ggplot2)"
"0","library(ggrepel)"
"0",""
"0","# show CN text"
"0","library(showtext) #https://github.com/yixuan/showtext"
"0","showtext_auto(enable = TRUE)"
"0","font_add(""fangSong"", regular = ""./fonts/方正仿宋_GBK.TTF"") # <<<<<<<<<<<<<<"
"0","font_add(""TimesNewRoman"", regular = ""./fonts/Times New Roman.ttf"")"
"0",""
"0","# store to pdf (create a pdf device) ---------------"
"0","# pdf(file = ""./output_manual/组间一致性水平趋势图.pdf"", width = 10, height = 8)"
"0","pdf(file = ""./output/【Analysis_wk】2.必要条件分析_组间一致性调整距离大于0.2的因果组合的_组间一致性变化趋势图.pdf"", width = 10, height = 8)"
"0",""
"0",""
"0","p_BECON_AdjDis_greater_0_2_Consistencies <- ggplot("
"0","  data = wide_yearly_BECON_AdjDis_greater_0_2_config, "
"0","  aes(x = YEAR, y = Consistencies, group = Config, color = Config)"
"0",") +"
"0","  geom_line() +"
"0","  geom_point() +"
"0","  geom_hline(yintercept = 0.90, linetype = ""dashed"", color = ""black"") +"
"0","  scale_x_discrete() +"
"0","  scale_y_continuous(breaks = seq(0.0, 1.0, by = 0.1),  # 包括 0.9"
"0","                     limits = c(0.0, 1.0),              # y 轴范围"
"0","                     expand = expansion(mult = c(0.01, 0.01))  # 防止上下太空"
"0","                     ) +"
"0","  labs("
"0","    x = ""年份"", "
"0","    y = ""组间一致性"", "
"0","    title = NULL,"
"0","    shape = ""条件组合"","
"0","    linetype = ""条件组合"","
"0","    color = ""条件组合"""
"0","  ) +"
"0","  theme_bw(base_family = ""TimesNewRoman"") + # 默认字体为 Times"
"0","  "
"0","  theme("
"0","    axis.title = element_text(family = ""fangSong"", size = 14),   # 坐标轴 title 用仿宋"
"0","    legend.title = element_text(family = ""fangSong"", size = 13), # 图例   title 用仿宋"
"0","    plot.margin = unit(c(1, 4, 1, 1), ""cm""),  # 右边多留点空间"
"0","    legend.position = ""bottom"""
"0","  ) +"
"0","  # 添加标签：在最后一年（如 2023）右侧略微偏移"
"0","  geom_text_repel("
"0","    family = ""TimesNewRoman"","
"0","    data = label_data,"
"0","    aes(label = Config),"
"0","    nudge_x = 0.6,             # 向右偏移"
"0","    direction = ""y"",           # 避免上下重叠"
"0","    hjust = 0,                 # 左对齐"
"0","    segment.color = NA,        # 不显示连接线"
"0","    size = 3.0,"
"0","    box.padding = 0.3,       "
"0","    point.padding = 0.05,"
"0","    #force = 0.6,              # 避让强度降低，避免推太远"
"0","    #force_pull = 0.3,         # 吸引力增强，靠近线尾"
"0","    max.overlaps = Inf,"
"0","    show.legend = FALSE        # 不用其出现在图例，"
"0","                               # 如果不告诉其如何显示图例，会在图例处每一个config前 加默认图例项 ""a"""
"0","  )"
"0",""
"0","p_BECON_AdjDis_greater_0_2_Consistencies"
