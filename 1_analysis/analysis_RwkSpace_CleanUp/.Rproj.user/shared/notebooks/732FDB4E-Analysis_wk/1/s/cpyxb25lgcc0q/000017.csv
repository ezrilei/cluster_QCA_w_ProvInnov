"0","# 绘图"
"0","library(ggplot2)"
"0","library(ggrepel)"
"0",""
"0","# show CN text"
"0","library(showtext) #https://github.com/yixuan/showtext"
"0","showtext_auto(enable = TRUE)"
"0","# font_add(""fangSong"", regular = ""./fonts/方正仿宋_GBK.TTF"") # <<<<<<<<<<<<<<"
"0","# font_add(""TimesNewRoman"", regular = ""./fonts/Times New Roman.ttf"")"
"0","font_add(""SongTi"", regular = ""./fonts/ STSongti-Regular-SC.ttf"")# <<<<<<<<<<<<<<"
"0",""
"0","# text repel data"
"0","label_data <- df_cluster_data_allY_BECONS_BECOV %>%"
"0","  group_by(PATHWAY) %>%"
"0","  filter(YEAR == max(YEAR)) %>%"
"0","  ungroup()"
"0",""
"0",""
"0","# store to pdf (create a pdf device) ---------------"
"0","# pdf(file = ""./output_manual/组间一致性水平趋势图.pdf"", width = 10, height = 8)"
"0","pdf(file = ""./output/【Analysis_wk】3.充分性分析_组间覆盖度变化趋势图.pdf"", width = 10, height = 8)"
"0",""
"0","p_config_BECOV <- ggplot(df_cluster_data_allY_BECONS_BECOV, "
"0","                          aes(x = YEAR, y = BECOV, group = PATHWAY, color = PATHWAY)) +"
"0","  geom_line() +"
"0","  geom_point() +"
"0","  geom_hline(yintercept = 0.50, linetype = ""dashed"", color = ""black"", alpha = 0.4) +"
"0","  scale_x_discrete() +"
"0","  scale_y_continuous("
"0","    breaks = seq(0.1, 0.8, by = 0.1),"
"0","    limits = c(0.1, 0.8)"
"0","    )+"
"0","  labs("
"0","    x = ""年份"","
"0","    y = ""组间覆盖度"","
"0","    color = ""因果路径"""
"0","  ) +"
"0","  theme_bw(base_family = ""SongTi"") +"
"0","  theme("
"0","    axis.title = element_text(family = ""SongTi"", size = 14),"
"0","    legend.title = element_text(family = ""SongTi"", size = 13),"
"0","    plot.margin = unit(c(1, 4, 1, 1), ""cm""),"
"0","    legend.position = ""bottom"""
"0","  ) +"
"0","  #guides(color = guide_legend(ncol = 1))  #+ # <<<<<<<< 每列 1 项，竖排"
"0","  # 添加标签：在最后一年（如 2023）右侧略微偏移"
"0","  geom_text_repel("
"0","    family = ""SongTi"","
"0","    data = label_data,"
"0","    aes(label = PATHWAY),"
"0","    nudge_x = 0.5,             # 向右偏移"
"0","    direction = ""both"",        # 允许上下左右避让"
"0","    hjust = 0,                 # 左对齐"
"0","    segment.color = NA,        # 不显示连接线"
"0","    size = 3.0,"
"0","    box.padding = 0.3,"
"0","    point.padding = 0.05,"
"0","    force = 4,                # 排斥强度（更强避让）"
"0","    force_pull = 0.2,         # 吸引力增强，靠近线尾"
"0","    max.overlaps = Inf,"
"0","    show.legend = FALSE        # 不用其出现在图例，"
"0","                               # 如果不告诉其如何显示图例，会在图例处每一个config前 加默认图例项 ""a"""
"0","  )"
"0",""
"0",""
"0","print(p_config_BECOV)"
